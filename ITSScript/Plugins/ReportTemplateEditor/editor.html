<!--
 Copyright 2019 by Quopt IT Services BV

  Licensed under the Artistic License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

    https://raw.githubusercontent.com/Quopt/ITR-webclient/master/LICENSE

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<div class="row col-12" id="ReportTemplateInterfaceEditSelectTest">
    <i class="fa fa-2x fa-arrow-circle-left" aria-hidden="true" onclick="window.history.back();"></i>&nbsp;
    <h4 id="ReportTemplateInterfaceEditSelectTestHeader">Report editor</h4>
    <div class="row col-12"><h5 id="ReportTemplateInterfaceEditSelectTestHeader2">Select the content to edit the reports for</h5></div><br/>
    <div class="row col-12">
        <ul notranslate id="ReportTemplateInterfaceEditSelectTestList" class="list-unstyled">
            <li id="ReportTemplateInterfaceEditSelectTestList1"> list is loading ...</li>
        </ul>
    </div>
    <br/><br/>
    <div>
        <button type="button" class="btn-sm btn-success" notranslate
                onclick="ITSInstance.ReportTemplateSessionController.downloadZIP();">
            <i class="fa fa-sm fa-download aria-hidden='true'"></i> <span id="ReportTemplateInterfaceEditSelectTest_DownloadZIP">Download all templates as ZIP</span>
        </button>&nbsp;
        <button type="button" class="btn-sm btn-success" notranslate
                onclick="if ('FileReader' in window) { document.getElementById('ReportTemplateInterfaceEditSelectTest-files-upload').click(); } else { alert('Your browser does not support this function. Please upgrade your browser.'); }">
            <i class="fa fa-sm fa-upload aria-hidden='true'"></i> <span id="ReportTemplateInterfaceEditSelectTest_UploadZIP">Upload ZIP</span>
        </button>&nbsp;
        <input type="file" onchange="ITSInstance.ReportTemplateSessionController.uploadZIP(event.target.files[0]);" style="visibility: hidden" id="ReportTemplateInterfaceEditSelectTest-files-upload" accept="*.zip"/>
    </div>
</div>

<div class="row col-12" id="ReportTemplateInterfaceEditSelectReport">
    <i class="fa fa-2x fa-arrow-circle-left" aria-hidden="true" onclick="window.history.back();"></i>&nbsp;
    <h4 id="ReportTemplateInterfaceEditSelectReportHeader">Report editor</h4>
    <div class="row col-12"><h5 id="ReportTemplateInterfaceEditSelectReportHeader2">Select a report to edit for</h5>&nbsp;<h5 id="ReportTemplateInterfaceEditSelectReportHeader2Test"></h5></div><br/>
    <div class="row col-12">
        <ul notranslate id="ReportTemplateInterfaceEditSelectReportList" class="list-unstyled">
            <li id="ReportTemplateInterfaceEditSelectReportList1"> list is loading ...</li>
        </ul>
    </div>
    <br/>
    <div class="row col-12">
        <button type="button" class="btn-sm btn-success" id="ReportTemplateInterfaceEditSelectReportAddNew"
                onclick="ITSInstance.ReportTemplateSessionController.addNewReportDefinition(); ">
            <i class="fa fa-sm fa-plus aria-hidden='true'"></i> Add new report definition
        </button>&nbsp;
    </div>
</div>


<div class="row col-12" id="ReportTemplateInterfaceEdit">
    <i class="fa fa-2x fa-arrow-circle-left" aria-hidden="true" onclick="ITSInstance.ReportTemplateSessionController.processBackClick();"></i>&nbsp;
    <h4 id="ReportTemplateInterfaceEditHeader">Report editor</h4><br/>

    <div class="bg-dark text-white well row col-12"><label id="ReportTemplateInterfaceEditSelectHeader">Report definition section</label>
    </div>

    <div class="row col-12">
        <ul class="nav nav-tabs">
            <li class="nav-item">
                <a class="nav-link active"
                   onclick="ITSInstance.ReportTemplateSessionController.showTab('ReportTemplateInterfaceEdit_TabReportInformation','ReportTemplateInterfaceEditTabReportInformation');">
                    <label id="ReportTemplateInterfaceEdit_TabReportInformation">Report information</label>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link active"
                   onclick="ITSInstance.ReportTemplateSessionController.showTab('ReportTemplateInterfaceEdit_TabReportWriter','ReportTemplateInterfaceEditTabReportWriter');">
                    <label id="ReportTemplateInterfaceEdit_TabReportWriter">Report writer</label>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link active"
                   onclick="ITSInstance.ReportTemplateSessionController.showTab('ReportTemplateInterfaceEdit_TabGraphs','ReportTemplateInterfaceEditTabGraphBuilder');">
                    <label id="ReportTemplateInterfaceEdit_TabGraphs">Graph builder</label>
                </a>
            </li>
        </ul>
    </div>

    <div id="ReportTemplateInterfaceEditTabReportInformation" class="row col-12">
        <div class="form-group row col-12"></div>
        <div class="form-group row col-12">
            <label class="col-sm-4 col-form-label" for="ReportTemplateInterfaceEdit_Active"
                   id="ReportTemplateInterfaceEdit_ActiveLabel">Report can be
                used</label>
            <div class="col-sm-8">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="checkbox" class="form-check-input"  data-field="Active" onchange="DataBinderFrom('ReportTemplateInterfaceEditTabReportInformation', ITSInstance.ReportTemplateSessionController.currentReport );"
                                                                       id="ReportTemplateInterfaceEdit_Active"/>
            </div>
        </div>
        <div class="form-group row col-12">
            <label class="col-sm-4 col-form-label" for="ReportTemplateInterfaceEdit_Name"
                   id="ReportTemplateInterfaceEdit_NameLabel">Report name</label>
            <div class="col-sm-8"><input type="text" class="form-control" maxlength="50" required="true"
                                         id="ReportTemplateInterfaceEdit_Name" data-field="Description" onkeyup="this.value = this.value.replace(/\W/g, ''); DataBinderFrom('ReportTemplateInterfaceEditTabReportInformation', ITSInstance.ReportTemplateSessionController.currentReport );"/></div>
        </div>
        <div class="form-group row col-12">
            <label class="col-sm-4 col-form-label" for="ReportTemplateInterfaceEdit_LanguageSelect"
                   id="ReportTemplateInterfaceEdit_LanguageSelectLabel">Report language</label>
            <div class="col-sm-8"><select notranslate class="form-control form-control-sm"
                                          id="ReportTemplateInterfaceEdit_LanguageSelect" onchange="ITSInstance.ReportTemplateSessionController.selectLanguageInEditor(this.selectedIndex);">
            </select>
            </div>
        </div>
        <div class="form-group row col-12">
            <label class="col-sm-4 col-form-label" id="ReportTemplateInterfaceEdit_ExplanationLabel"
                   for="ReportTemplateInterfaceEdit_Explanation">Explanation</label>
            <div class="col-sm-8">
                <textarea-htmledit notranslate class="form-control"  data-field="Explanation"
                                   onkeyup="DataBinderFrom('ReportTemplateInterfaceEditTabReportInformation', ITSInstance.ReportTemplateSessionController.currentReport );"
                                   id="ReportTemplateInterfaceEdit_Explanation"></textarea-htmledit>
            </div>
        </div>
        <div class="form-group row col-12">
            <label class="col-sm-4 col-form-label" for="ReportTemplateInterfaceEdit_Remarks"
                   id="ReportTemplateInterfaceEdit_RemarksLabel">Remarks (only shown
                here)</label>
            <div class="col-sm-8"><textarea class="form-control" rows="4"  data-field="Remarks" onkeyup="DataBinderFrom('ReportTemplateInterfaceEditTabReportInformation', ITSInstance.ReportTemplateSessionController.currentReport );"
                                            id="ReportTemplateInterfaceEdit_Remarks"></textarea></div>
        </div>

    </div>

    <div id="ReportTemplateInterfaceEditTabReportWriter" class="row col-12">
        <label class="col-sm-12" id="ReportTemplateInterfaceEdit_ReportWriterLabel">Report text (see below for an explanation on fields that can be used)</label>

        <div class="col-sm-12">
            <textarea-htmledit notranslate class="form-control"  data-field="ReportText"
                               onkeyup="DataBinderFrom('ReportTemplateInterfaceEditTabReportWriter', ITSInstance.ReportTemplateSessionController.currentReport );"
                               id="ReportTemplateInterfaceEdit_ReportWriter"></textarea-htmledit>
        </div>

        <div class="form-group row col-12">
            <label class="col-12 col-form-label" for="ReportTemplateInterfaceEdit_ReportWriterFields"
                   id="ReportTemplateInterfaceEdit_ReportWriterFieldsLabel">Usable fields</label>
            <div class="col-12"><textarea NoTranslate class="form-control" rows="8" id="ReportTemplateInterfaceEdit_ReportWriterFields" disabled></textarea></div>
        </div>

        <div class="bg-dark text-white well row col-12"><label id="ReportTemplateInterfaceEditTabReportWriter_PreScriptHeader">Script run before the report</label><label notranslate>(...)</label>
        </div>
        <div class="flex-row col-12">&nbsp;
            <div ace-edit id="ReportTemplateInterfaceEditTabReportWriterEditor" notranslate data-field="BeforeReportScript"
                 onkeyup="DataBinderFrom('ReportTemplateInterfaceEditTabReportWriter', ITSInstance.ReportTemplateSessionController.currentReport);"></div>
        </div>
        <div class="flex-row col-12">&nbsp;</div>
    </div>

    <div id="ReportTemplateInterfaceEditTabGraphBuilder" class="row col-12">
        <div class="row col-12">
            <label class="col-2" id="ReportTemplateInterfaceEditTabGraphBuilderHeader"
                   for="ReportTemplateInterfaceEditTabGraphBuilder-Select">Select graph</label>
            <select notranslate class="form-control form-control-sm col-6"
                    id="ReportTemplateInterfaceEditTabGraphBuilder-Select"
                    onchange="ITSInstance.ReportTemplateSessionController.showGraphInEditor(this.selectedIndex);"></select>
            <button id="ReportTemplateInterfaceEditTabGraphBuilderAddButton" type="button"
                    class="btn-xs btn-success"
                    onclick="ITSInstance.ReportTemplateSessionController.addNewGraphInEditor();"><i
                    class="fa fa-fw fa-plus"></i>Add
                new graph
            </button>
            <button id="ReportTemplateInterfaceEditTabGraphBuilderRemove" type="button"
                    class="btn-xs btn-warning"
                    onclick="ITSInstance.ReportTemplateSessionController.removeGraphFromEditor();"><i
                    class="fa fa-fw fa-trash"></i>Remove graph
            </button>
        </div>

        <div NoTranslate class="col-12 row" id="GraphEditor">
            <div class="form-group row col-12">
                <label class="col-sm-4 col-form-label" for="ReportTemplateInterfaceGraph_Name"
                       id="ReportTemplateInterfaceGraph_NameLabel">Graph name</label>
                <div class="col-sm-8"><input type="text" class="form-control" maxlength="50" required="true"
                                             id="ReportTemplateInterfaceGraph_Name" data-field="Name" onkeyup="this.value = this.value.replace(/\W/g, ''); DataBinderFrom('ReportTemplateInterfaceEditTabGraphBuilder', ITSInstance.ReportTemplateSessionController.currentGraph ); ITSInstance.ReportTemplateSessionController.fillGraphsList(); "/></div>
            </div>

            <div class="col-6" id="GraphEditorProperties"></div>
            <div class="col-6" id="GraphEditorPreview"></div>

            <div class="form-group row col-12">
                <label class="col-sm-12 col-form-label" for="ReportTemplateInterfaceEdit_GraphFields"
                id="ReportTemplateInterfaceEdit_GraphFieldsLabel">Usable fields</label>
                <div class="col-sm-12"><textarea NoTranslate disabled class="form-control" rows="8" id="ReportTemplateInterfaceEdit_GraphFields"></textarea></div>
            </div>

            <div class="form-group row col-12">
                <label class="col-sm-4 col-form-label" for="ReportTemplateInterfaceEditGraph_Remarks"
                       id="ReportTemplateInterfaceEditGraph_RemarksLabel">Remarks (only shown
                    here)</label>
                <div class="col-sm-8"><textarea class="form-control" rows="4"  data-field="Remarks" onkeyup="DataBinderFrom('ReportTemplateInterfaceEditTabGraphBuilder', ITSInstance.ReportTemplateSessionController.currentGraph );"
                                                id="ReportTemplateInterfaceEditGraph_Remarks"></textarea></div>
            </div>
        </div>

    </div>

    <div class="bg-dark text-white well row col-12"><label id="ReportTemplateInterfaceEditTabReportWriter_ActionHeader">Actions</label></div>
    <div id="ReportTemplateInterfaceEditButtonBar" class="row col-12">
        <div class="row col-12"></div>
        <button NoTranslate id="ReportTemplateInterfaceEditTabReportWriter_ActionButtonSave" type="button" class="btn btn-success"
                onclick="ITSInstance.ReportTemplateSessionController.saveCurrentReport();"><i
                id="ReportTemplateInterfaceEditTabReportWriter_saveIcon" class="fa fa-fw fa-thumbs-up"></i>
            <span id="ReportTemplateInterfaceEdit-saveButtonLabel">Save report definition</span>
        </button>&nbsp;
        <button NoTranslate id="ReportTemplateInterfaceEditTabReportWriter_ActionButtonCopy" type="button" class="btn btn-success"
                onclick="ITSInstance.ReportTemplateSessionController.copyCurrentReport();"><i class="fa fa-fw fa-copy"></i>
            <span id="ReportTemplateInterfaceEdit-copyButtonLabel">Copy this report</span>
        </button>&nbsp;
        <button NoTranslate id="ReportTemplateInterfaceEditTabReportWriter_ActionButtonDelete" type="button" class="btn btn-warning"
                onclick="ITSInstance.ReportTemplateSessionController.deleteCurrentReportWarning();"><i
                class="fa fa-fw fa-trash"></i><span id="ReportTemplateInterfaceEdit-deleteButtonLabel"> Delete this report definition</span>
        </button>&nbsp;

        <button id="ReportTemplateInterfaceEditTranslateButton" type="button"
                class="btn btn-success"
                data-toggle="modal" data-target="#ReportTemplateInterfaceEditTranslate">
            <i class="fa fa-fw fa-language"></i> Translate report
        </button>&nbsp;

        <button NoTranslateid="ReportTemplateInterfaceEdit-downloadButton" type="button" class="btn btn-success" onclick="ITSInstance.ReportTemplateSessionController.downloadCurrentTemplate();"><i class="fa fa-fw fa-download"></i><span id="ReportTemplateInterfaceEdit-downloadButtonLabel"> Download report definition</span></button>&nbsp;
        <button NoTranslate id="ReportTemplateInterfaceEdit-uploadButton" type="button" class="btn btn-success" onclick="if ('FileReader' in window) { document.getElementById('ReportTemplateInterfaceEdit-files').click(); } else { alert('Your browser does not support this function. Please upgrade your browser.'); }"><i class="fa fa-fw fa-upload"></i><span id="ReportTemplateInterfaceEdit-uploadButtonLabel"> Upload report definition</span></button>&nbsp;
        <input NoTranslate type="file" onchange="ITSInstance.ReportTemplateSessionController.uploadCurrentTemplate(event.target.files[0]);" style="visibility: hidden" id="ReportTemplateInterfaceEdit-files" accept=".itrreporttemplate"/>
    </div>
</div>

<div class="modal fade" id="ReportTemplateInterfaceEditTranslate" tabindex="-1" role="dialog" aria-labelledby="ReportTemplateInterfaceEditTranslateLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="ReportTemplateInterfaceEditTranslateLabel">Translate</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="row">
                        <label class="col-sm-6 col-form-label" for="ReportTemplateInterfaceEdit-SourceLanguageSelect"
                               id="ReportTemplateInterfaceEdit-SourceLanguageSelectLabel">Source language</label>
                        <div class="col-sm-6"><select notranslate class="form-control form-control-sm"
                                                      id="ReportTemplateInterfaceEdit-SourceLanguageSelect" onchange="ITSInstance.ReportTemplateSessionController.selectSourceLanguageForTranslation(this.value);">
                        </select>
                        </div>
                    </div>
                    <div class="row">
                        <label class="col-sm-6 col-form-label" for="ReportTemplateInterfaceEdit-TargetLanguageSelect"
                               id="ReportTemplateInterfaceEdit-TargetLanguageSelectLabel">Target language</label>
                        <div class="col-sm-6"><select notranslate class="form-control form-control-sm"
                                                      id="ReportTemplateInterfaceEdit-TargetLanguageSelect" onchange="ITSInstance.ReportTemplateSessionController.selectTargetLanguageForTranslation(this.value);">
                        </select>
                        </div>
                    </div>

                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal" id="ReportTemplateInterfaceEditTranslateCloseButton">Close</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal" id="ReportTemplateInterfaceEditTranslateTranslateNowButton" onclick="ITSInstance.ReportTemplateSessionController.startTranslation();">Start translation</button>
            </div>
        </div>
    </div>
</div>

<div id="ReportTemplateInterfaceEditTabReportTranslator" class="row col-12">
</div>
